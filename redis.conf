# Redis Configuration for Cleona

# Network and Security
# Allow connections from Docker network
bind 0.0.0.0
protected-mode no
port 6379

# Authentication
requirepass cleona_redis_secure_pass_2024

# Persistence
appendonly yes
appendfilename "appendonly.aof"
appendfsync everysec

# Disable dangerous commands
rename-command FLUSHDB ""
rename-command FLUSHALL ""
rename-command CONFIG "CONFIG_cleona_2024"

# Memory management
maxmemory 1gb
maxmemory-policy allkeys-lru

# Logging
loglevel notice
logfile /data/redis.log

# Save snapshots
save 900 1
save 300 10
save 60 10000

# Disable replication for now (was causing issues)
# repl-diskless-sync no
# repl-diskless-sync-delay 5